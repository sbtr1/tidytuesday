legend.position="none") +
#transition_reveal(year) +
NULL
milk %>%
group_by(region, year) %>%
summarise(mean_milk=mean(milk_produced)) %>%
ggplot(aes(x=year,y=mean_milk, color=region)) +
geom_bar(stat="identity") +
#geom_line() +
#geom_density() +
facet_wrap(~region, ncol=5) +
theme_grey() +
theme(axis.title=element_blank(),
legend.position="none") +
#transition_reveal(year) +
NULL
milk %>%
group_by(region, year) %>%
summarise(mean_milk=mean(milk_produced)) %>%
ggplot(aes(x=year,y=mean_milk, color=region)) +
#geom_bar(stat="identity") +
#geom_line() +
#geom_density() +
geom_area() +
facet_wrap(~region, ncol=5) +
theme_grey() +
theme(axis.title=element_blank(),
legend.position="none") +
#transition_reveal(year) +
NULL
milk %>%
group_by(region, year) %>%
summarise(mean_milk=mean(milk_produced)) %>%
ggplot(aes(x=year,y=mean_milk, fill=region)) +
#geom_bar(stat="identity") +
#geom_line() +
#geom_density() +
geom_area() +
facet_wrap(~region, ncol=5) +
theme_grey() +
theme(axis.title=element_blank(),
legend.position="none") +
#transition_reveal(year) +
NULL
milk %>%
group_by(region, year) %>%
summarise(mean_milk=mean(milk_produced)) %>%
ggplot(aes(x=year,y=mean_milk, fill=region)) +
#geom_bar(stat="identity") +
#geom_line() +
#geom_density() +
geom_area() +
facet_wrap(~region, ncol=5) +
theme_grey() +
theme(axis.title=element_blank(),
legend.position="none") +
transition_reveal(year) +
NULL
milk %>%
group_by(region, year) %>%
summarise(sum_milk=sum(milk_produced)) %>%
ggplot(aes(x=year,y=sum_milk, fill=region)) +
geom_area() +
facet_wrap(~region, ncol=5) +
theme_grey() +
theme(axis.title=element_blank(),
legend.position="none",
title = "Sum of milk produced by region") +
#transition_reveal(year) +
NULL
milk %>%
group_by(region, year) %>%
summarise(sum_milk=sum(milk_produced)) %>%
ggplot(aes(x=year,y=sum_milk, fill=region)) +
geom_area() +
facet_wrap(~region, ncol=5) +
theme_grey() +
theme(axis.title=element_blank(),
legend.position="none",
title = element_text("Sum of milk produced by region")) +
#transition_reveal(year) +
NULL
milk$year <- as.factor(milk$year)
milk %>%
group_by(region, year) %>%
summarise(sum_milk=sum(milk_produced)) %>%
ggplot(aes(x=year,y=sum_milk, fill=region)) +
geom_area() +
facet_wrap(~region, ncol=5) +
theme_grey() +
theme(axis.title=element_blank(),
legend.position="none",
title = element_text("Sum of milk produced by region")) +
#transition_reveal(year) +
NULL
milk %>%
group_by(region, year) %>%
summarise(sum_milk=sum(milk_produced)) %>%
ggplot(aes(x=year,y=sum_milk, fill=region)) +
geom_area() +
facet_wrap(~region, ncol=5) +
theme_grey() +
theme(axis.title=element_blank(),
legend.position="none",
title = element_text("Sum of milk produced by region")) +
transition_reveal(year) +
NULL
milk$year <- as.numeric(milk$year)
milk <- read_csv("state_milk_production.csv")
milk$year <- as.numeric(milk$year)
milk %>%
group_by(region, year) %>%
summarise(sum_milk=sum(milk_produced)) %>%
ggplot(aes(x=year,y=sum_milk, fill=region)) +
geom_area() +
facet_wrap(~region, ncol=5) +
theme_grey() +
theme(axis.title=element_blank(),
legend.position="none",
title = element_text("Sum of milk produced by region")) +
transition_reveal(year) +
NULL
milk %>%
group_by(region, year) %>%
summarise(sum_milk=sum(milk_produced)) %>%
ggplot(aes(x=year,y=sum_milk, fill=region)) +
geom_area() +
facet_wrap(~region, ncol=5) +
theme_grey() +
theme(axis.title=element_blank(),
legend.position="none",
title = element_text("Sum of milk produced by region")) +
#transition_reveal(year) +
NULL
milk %>%
group_by(region, year) %>%
summarise(sum_milk=sum(milk_produced)/1000000) %>%
ggplot(aes(x=year,y=sum_milk, fill=region)) +
geom_area() +
facet_wrap(~region, ncol=5) +
theme_grey() +
theme(axis.title=element_blank(),
legend.position="none",
title = element_text("Sum of milk produced by region")) +
#transition_reveal(year) +
NULL
milk %>%
group_by(region, year) %>%
summarise(sum_milk=sum(milk_produced)/1000000000) %>%
ggplot(aes(x=year,y=sum_milk, fill=region)) +
geom_area() +
facet_wrap(~region, ncol=5) +
theme_grey() +
theme(axis.title=element_blank(),
legend.position="none",
title = element_text("Sum of milk produced by region")) +
#transition_reveal(year) +
NULL
milk$year <- as.numeric(milk$year, format="%f")
milk %>%
group_by(region, year) %>%
summarise(sum_milk=sum(milk_produced)/1000000000) %>%
ggplot(aes(x=year,y=sum_milk, fill=region)) +
geom_area() +
facet_wrap(~region, ncol=5) +
theme_grey() +
theme(axis.title=element_blank(),
legend.position="none",
title = element_text("Sum of milk produced by region")) +
transition_reveal(year) +
NULL
milk %>%
group_by(region, year) %>%
summarise(sum_milk=sum(milk_produced)/1000000000) %>%
ggplot(aes(x=year,y=sum_milk, fill=region)) +
geom_area() +
facet_wrap(~region, ncol=5) +
theme_grey() +
theme(axis.title=element_blank(),
legend.position="none",
title = element_text("Sum of milk produced by region")) +
transition_reveal(along=year) +
NULL
data(airquality)
milk$year <- as.integer(milk$year)
milk %>%
group_by(region, year) %>%
summarise(sum_milk=sum(milk_produced)/1000000000) %>%
ggplot(aes(x=year,y=sum_milk, fill=region)) +
geom_area() +
facet_wrap(~region, ncol=5) +
theme_grey() +
theme(axis.title=element_blank(),
legend.position="none",
title = element_text("Sum of milk produced by region")) +
transition_reveal(along=year) +
NULL
milk %>%
group_by(region, year) %>%
summarise(sum_milk=sum(milk_produced)/1000000000) %>%
ggplot(aes(x=year,y=sum_milk, fill=region)) +
geom_area() +
facet_wrap(~region, ncol=5) +
theme_grey() +
theme(axis.title=element_blank(),
legend.position="none",
title = element_text("Sum of milk produced by region")) +
#transition_reveal(along=year) +
NULL
rm(airquality)
View(milk)
milk <- na.omit(milk)
milk %>%
group_by(region, year) %>%
summarise(sum_milk=sum(milk_produced)/1000000000) %>%
ggplot(aes(x=year,y=sum_milk, fill=region)) +
geom_area() +
facet_wrap(~region, ncol=5) +
theme_grey() +
theme(axis.title=element_blank(),
legend.position="none",
title = element_text("Sum of milk produced by region")) +
#transition_reveal(along=year) +
NULL
milk %>%
group_by(region, year) %>%
summarise(sum_milk=sum(milk_produced)/1000000000) %>%
ggplot(aes(x=year,y=sum_milk, fill=region)) +
geom_area() +
facet_wrap(~region, ncol=5) +
theme_grey() +
theme(axis.title=element_blank(),
legend.position="none",
title = element_text("Sum of milk produced by region")) +
transition_reveal(along=year) +
NULL
milk %>%
group_by(region, year) %>%
summarise(sum_milk=sum(milk_produced)/1000000000) %>%
ggplot(aes(x=year,y=sum_milk, fill=region)) +
geom_area() +
facet_wrap(~region, ncol=5) +
theme_grey() +
theme(axis.title=element_blank(),
legend.position="none") +
ggtitle("Sum of milk production by region (bn lb)") +
#transition_reveal(along=year) +
NULL
milk %>%
group_by(region, year) %>%
summarise(sum_milk=sum(milk_produced)/1000000000) %>%
ggplot(aes(x=year,y=sum_milk, fill=region)) +
geom_area() +
facet_wrap(~region, ncol=5) +
theme_grey() +
theme(axis.title=element_blank(),
legend.position="none") +
labs(title="Rise of the Pacific", subtitle="Sum of milk production by region (bn lb)") +
#transition_reveal(along=year) +
NULL
milk %>%
group_by(region, year) %>%
summarise(sum_milk=sum(milk_produced)/1000000000) %>%
ggplot(aes(x=year,y=sum_milk, fill=region)) +
geom_area() +
facet_wrap(~region, ncol=5) +
theme_fivethirtyeight() +
theme(axis.title=element_blank(),
legend.position="none") +
labs(title="Rise of the Pacific", subtitle="Sum of milk production by region (bn lb)") +
#transition_reveal(along=year) +
NULL
library(ggthemes)
milk %>%
group_by(region, year) %>%
summarise(sum_milk=sum(milk_produced)/1000000000) %>%
ggplot(aes(x=year,y=sum_milk, fill=region)) +
geom_area() +
facet_wrap(~region, ncol=5) +
theme_fivethirtyeight() +
theme(axis.title=element_blank(),
legend.position="none") +
labs(title="Rise of the Pacific", subtitle="Sum of milk production by region (bn lb)") +
#transition_reveal(along=year) +
NULL
milk %>%
group_by(region, year) %>%
summarise(sum_milk=sum(milk_produced)/1000000000) %>%
ggplot(aes(x=year,y=sum_milk, fill=region)) +
geom_area() +
facet_wrap(~region, ncol=5) +
scale_x_continuous() +
theme_fivethirtyeight() +
theme(axis.title=element_blank(),
legend.position="none") +
labs(title="Rise of the Pacific", subtitle="Sum of milk production by region (bn lb)") +
#transition_reveal(along=year) +
NULL
milk %>%
group_by(region, year) %>%
summarise(sum_milk=sum(milk_produced)/1000000000) %>%
ggplot(aes(x=year,y=sum_milk, fill=region)) +
geom_area() +
facet_wrap(~region, ncol=5) +
scale_x_continuous(breaks=seq(1970,2020,20)) +
theme_fivethirtyeight() +
theme(axis.title=element_blank(),
legend.position="none") +
labs(title="Rise of the Pacific", subtitle="Sum of milk production by region (bn lb)") +
#transition_reveal(along=year) +
NULL
milk %>%
group_by(region, year) %>%
summarise(sum_milk=sum(milk_produced)/1000000000) %>%
ggplot(aes(x=year,y=sum_milk, fill=region)) +
geom_area() +
facet_wrap(~region, ncol=5) +
scale_x_continuous(breaks=seq(1970,2020,10)) +
theme_fivethirtyeight() +
theme(axis.title=element_blank(),
legend.position="none") +
labs(title="Rise of the Pacific", subtitle="Sum of milk production by region (bn lb)") +
#transition_reveal(along=year) +
NULL
milk %>%
group_by(region, year) %>%
summarise(sum_milk=sum(milk_produced)/1000000000) %>%
ggplot(aes(x=year,y=sum_milk, fill=region)) +
geom_area() +
facet_wrap(~region, ncol=5) +
scale_x_continuous(breaks=seq(1970,2020,10)) +
theme_fivethirtyeight() +
theme(axis.title=element_blank(),
legend.position="none",
axis.text.x  = element_text(angle=90, vjust=0.5)) +
labs(title="Rise of the Pacific", subtitle="Sum of milk production by region (bn lb)") +
#transition_reveal(along=year) +
NULL
milk %>%
group_by(region, year) %>%
summarise(sum_milk=sum(milk_produced)/1000000000) %>%
ggplot(aes(x=year,y=sum_milk, fill=region)) +
geom_bar() +
facet_wrap(~region, ncol=5) +
scale_x_continuous(breaks=seq(1970,2020,10)) +
theme_fivethirtyeight() +
theme(axis.title=element_blank(),
legend.position="none",
axis.text.x  = element_text(angle=90, vjust=0.5)) +
labs(title="Rise of the Pacific", subtitle="Sum of milk production by region (bn lb)") +
#transition_reveal(along=year) +
NULL
milk %>%
group_by(region, year) %>%
summarise(sum_milk=sum(milk_produced)/1000000000) %>%
ggplot(aes(x=year,y=sum_milk, fill=region)) +
geom_bar(stat="identity") +
facet_wrap(~region, ncol=5) +
scale_x_continuous(breaks=seq(1970,2020,10)) +
theme_fivethirtyeight() +
theme(axis.title=element_blank(),
legend.position="none",
axis.text.x  = element_text(angle=90, vjust=0.5)) +
labs(title="Rise of the Pacific", subtitle="Sum of milk production by region (bn lb)") +
#transition_reveal(along=year) +
NULL
milk %>%
group_by(region, year) %>%
summarise(sum_milk=sum(milk_produced)/1000000000) %>%
ggplot(aes(x=year,y=sum_milk, fill=region)) +
geom_area() +
facet_wrap(~region, ncol=5) +
scale_x_continuous(breaks=seq(1970,2020,10)) +
theme_fivethirtyeight() +
theme(axis.title=element_blank(),
legend.position="none",
axis.text.x  = element_text(angle=90, vjust=0.5)) +
labs(title="Rise of the Pacific", subtitle="Sum of milk production by region (bn lb)") +
transition_reveal(along=year) +
NULL
anim <- milk %>%
group_by(region, year) %>%
summarise(sum_milk=sum(milk_produced)/1000000000) %>%
ggplot(aes(x=year,y=sum_milk, fill=region)) +
geom_area() +
facet_wrap(~region, ncol=5) +
scale_x_continuous(breaks=seq(1970,2020,10)) +
theme_fivethirtyeight() +
theme(axis.title=element_blank(),
legend.position="none",
axis.text.x  = element_text(angle=90, vjust=0.5)) +
labs(title="Rise of the Pacific", subtitle="Sum of milk production by region (bn lb)") +
transition_reveal(along=year) +
NULL
anim_save("filenamehere.gif", anim)
library(tidyverse)
library(scales)
library(lubridate)
library(ggmap)
library(gganimate)
library(ggthemes)
library(transformr)
install.packages("transformr")
library(tidyverse)
library(scales)
library(lubridate)
library(ggmap)
library(gganimate)
library(ggthemes)
library(transformr)
milk_raw <- read_csv("https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2019/2019-01-29/state_milk_production.csv")
milk <- milk_raw
usa <- as_tibble(map_data("state"))
usa$region <- str_to_title(usa$region)
usa <- usa %>%
rename(state = region)
milk_parsed <- milk %>%
select(-region) %>%
mutate(milk_10billion = milk_produced / 10000000000,
year = as.integer(year)) %>%
full_join(usa) %>%
filter(!is.na(year), !is.na(long), !is.na(lat))
View(usa)
usa <- as_tibble(map_data("state"))
View(usa)
usa <- as_tibble(map_data("state"))
usa$region <- str_to_title(usa$region)
usa <- usa %>%
rename(state = region)
milk_parsed <- milk %>%
select(-region) %>%
mutate(milk_10billion = milk_produced / 10000000000,
year = as.integer(year)) %>%
full_join(usa) %>%
filter(!is.na(year), !is.na(long), !is.na(lat))
View(milk_parsed)
map_data("state")
usa <- as_tibble(map_data("state"))
usa <- as_tibble(map_data("state"))
usa$region <- str_to_title(usa$region)
library(tidyverse)
library(scales)
library(lubridate)
library(ggmap)
library(gganimate)
library(ggthemes)
library(transformr)
milk_raw <- read_csv("https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2019/2019-01-29/state_milk_production.csv")
milk <- milk_raw
usa <- as_tibble(map_data("state"))
usa$region <- str_to_title(usa$region)
usa <- usa %>%
rename(state = region)
milk_parsed <- milk %>%
select(-region) %>%
mutate(milk_10billion = milk_produced / 10000000000,
year = as.integer(year)) %>%
full_join(usa) %>%
filter(!is.na(year), !is.na(long), !is.na(lat))
milk_animation <- milk_parsed %>%
ggplot(aes(long, lat, group = group, fill = milk_10billion)) +
geom_polygon(color = 'black') +
scale_fill_gradient2(low = "gray97", mid = "steelblue", high = "midnightblue", midpoint = 2.5) +
theme_map(base_size = 15) +
coord_map() +
labs(x = NULL,
y = NULL,
fill = NULL,
title = "Milk production per 10 billion pounds",
subtitle = "Year: {round(frame_time)}",
caption = "Source: USDA") +
transition_time(year)
animate(milk_animation, height = 800, width = 800)
library(xlsx)
library(tidyverse)
library(ggthemes)
pf <- read.xlsx("PF.xlsx", sheetName = "PF")
fx <- read.xlsx("PF.xlsx", sheetName = "FX")
weights <- read.xlsx("PF.xlsx", sheetName = "Weights")
pf <- inner_join(pf, fx, by="Currency")
pf$value <- pf$Units * pf$Price * pf$Rate
pf$yield <- pf$DPS/pf$Price
pf_value <- sum(pf$value)
barker_value <- weights[1,2] * pf_value
#pf %>% group_by(Type) %>% summarize(pct_value = sum(value)/pf_value)
returns <- read.csv("returns.csv")
returns <- returns[,1:2]
returns$Date <- as.Date(returns$Date, format = "%Y-%m-%d")
#returns$Date <- as.Date(returns$Date, format = "%d/%m/%Y")
returns2 <- data.frame(Sys.Date(), barker_value)
names(returns2) <- c("Date", "NAV")
returns <- rbind(returns, returns2)
returns_graph <- returns
returns_graph$NAV_norm <- returns$NAV/returns$NAV[1]*100
returns_graph %>%
ggplot(aes(x=Date, y=NAV_norm)) +
geom_line(col="darkblue") +
theme_grey() +
theme(legend.position = "right", axis.title=element_blank()) +
labs(title="NAV",
subtitle="Jan 2019=100") +
NULL
write.csv(returns, file = "returns.csv", row.names=FALSE)
returns <- read.csv("returns.csv")
library(tidyverse)
trains <- read.csv("/data/small_trains.csv")
trains <- read.csv("data/small_trains.csv")
View(trains)
str(trains)
library(tidyverse)
board_games <- readr::read_csv("https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2019/2019-03-12/board_games.csv")
View(board_games)
